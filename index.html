<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G Burg's Lanches - Card√°pio Digital</title>
    <style>
        :root {
            --primary: #FF8C00;
            --bg: #000000;
            --card: #1e1e1e;
            --text: #ffffff;
            --danger: #ff4444;
            --input-bg: #333;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 100px; }
        
        header { background-color: #000; padding: 20px; text-align: center; border-bottom: 3px solid var(--primary); box-shadow: 0 4px 15px rgba(255, 140, 0, 0.2); }
        .logo-img { max-width: 200px; width: 100%; height: auto; display: block; margin: 0 auto; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }

        /* CATEGORIAS (ABAS) */
        .category-header {
            background-color: #252525;
            padding: 15px;
            border-left: 5px solid var(--primary);
            margin-top: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 5px;
            transition: background 0.2s;
        }
        .category-header:hover { background-color: #333; }
        .category-title { color: var(--primary); margin: 0; text-transform: uppercase; font-size: 1.2em; font-weight: bold; }
        .toggle-icon { font-size: 1.2em; transition: transform 0.3s; color: var(--primary); }
        .category-header.active .toggle-icon { transform: rotate(180deg); }
        
        .items-container { display: none; padding-top: 15px; animation: fadeIn 0.3s; }
        .items-container.open { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ITENS */
        .menu-item { background: var(--card); margin-bottom: 20px; border-radius: 12px; overflow: hidden; border: 1px solid #333; display: flex; flex-wrap: wrap; }
        .menu-image { width: 120px; height: 120px; object-fit: cover; }
        .item-content { padding: 15px; flex: 1; min-width: 250px; display: flex; flex-direction: column; justify-content: center;}
        .item-info h3 { margin: 0 0 5px 0; color: var(--primary); font-size: 1.2em; font-weight: bold; }
        .item-info p { margin: 0; font-size: 0.9em; color: #ccc; }
        .price-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 0 15px 15px 15px; width: 100%; }
        .price { font-weight: bold; font-size: 1.3em; color: white; }
        
        .add-btn { background-color: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 30px; cursor: pointer; font-weight: bold; transition: transform 0.2s; }
        .add-btn:hover { transform: scale(1.05); background-color: #e67e00; }

        /* OP√á√ïES */
        .options-container { padding: 10px 15px; background: #252525; width: 100%; border-top: 1px solid #333; }
        .options-title { font-size: 0.9em; color: var(--primary); margin-bottom: 8px; display: block; font-weight: bold; margin-top: 10px;}
        .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }
        .checkbox-label { display: flex; align-items: center; font-size: 0.85em; cursor: pointer; background: #333; padding: 8px 12px; border-radius: 15px; border: 1px solid #444; }
        .checkbox-label input { margin-right: 8px; accent-color: var(--primary); transform: scale(1.2); }

        /* CARRINHO E MODAIS */
        .cart-bar { position: fixed; bottom: 0; left: 0; width: 100%; background-color: var(--primary); color: white; padding: 15px; z-index: 90; box-shadow: 0 -4px 20px rgba(0,0,0,0.7); display: none; justify-content: space-between; align-items: center; box-sizing: border-box; }
        .cart-bar-info { display: flex; flex-direction: column; }
        .cart-count { font-size: 0.8em; opacity: 0.9; }
        .cart-total { font-size: 1.2em; font-weight: bold; }
        .cart-bar button { background: white; color: var(--primary); border: none; padding: 12px 25px; border-radius: 30px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: none; justify-content: center; align-items: center; }
        .modal-content { background: #1e1e1e; padding: 25px; border-radius: 15px; width: 95%; max-width: 500px; max-height: 90vh; overflow-y: auto; border: 1px solid #FF8C00; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title { font-size: 1.4em; color: var(--primary); font-weight: bold; }
        
        .cart-list { list-style: none; padding: 0; margin: 0; }
        .cart-item { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px solid #333; padding: 15px 0; }
        .cart-item-info { flex: 1; padding-right: 10px; }
        .cart-item-name { font-weight: bold; font-size: 1.1em; display: block; color: white;}
        .cart-item-details { font-size: 0.85em; color: #aaa; display: block; margin-top: 5px; font-style: italic;}
        .cart-item-price { color: var(--primary); font-weight: bold; margin-top: 5px; display: block; }
        .btn-remove { background: transparent; border: 1px solid var(--danger); color: var(--danger); padding: 5px 10px; border-radius: 8px; cursor: pointer; font-size: 0.8em; }

        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; color: #ccc; font-size: 0.9em; }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444; background: var(--input-bg); color: white; font-family: inherit; box-sizing: border-box; }
        .form-select { appearance: none; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FF8C00%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.7-9.3-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); background-repeat: no-repeat; background-position: right .7em top 50%; background-size: .65em auto; }
        
        .btn-confirm { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; font-size: 1.1em; margin-top: 10px; }
        .btn-back { background: #333; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }

        @media (max-width: 600px) {
            .menu-item { flex-direction: column; }
            .menu-image { width: 100%; height: 150px; }
            .price-actions { padding: 15px; }
        }
    </style>
</head>
<body>

<header>
    <img src="GBurgs.Logo.png" alt="G Burg's Lanches" class="logo-img" width="150">
</header>

<div class="container" id="menu-container"></div>

<div class="cart-bar" id="cart-bar">
    <div class="cart-bar-info">
        <span class="cart-count" id="cart-count">0 itens</span>
        <span class="cart-total" id="cart-total">R$ 0,00</span>
    </div>
    <button onclick="abrirModalCarrinho()">Ver Carrinho</button>
</div>

<div class="modal-overlay" id="cart-modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="modal-title">Seu Carrinho</span>
            <span style="cursor: pointer; font-size: 1.5em;" onclick="fecharModalCarrinho()">&times;</span>
        </div>
        <ul class="cart-list" id="cart-list"></ul>
        <div style="text-align: right; margin-top: 15px; font-size: 1.3em; font-weight: bold;">
            Total: <span id="modal-total-price" style="color: var(--primary);">R$ 0,00</span>
        </div>
        <button class="btn-confirm" onclick="irParaCheckout()">Continuar para Entrega</button>
        <button class="btn-back" onclick="fecharModalCarrinho()">Voltar ao Card√°pio</button>
    </div>
</div>

<div class="modal-overlay" id="checkout-modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="modal-title">Finalizar Pedido</span>
            <span style="cursor: pointer; font-size: 1.5em;" onclick="fecharCheckout()">&times;</span>
        </div>
        
        <div class="form-group">
            <label class="form-label">Seu Nome:</label>
            <input type="text" id="cli-nome" class="form-input" placeholder="Digite seu nome">
        </div>

        <div class="form-group">
            <label class="form-label">Bairro de Entrega:</label>
            <select id="cli-bairro" class="form-select" onchange="atualizarTotalComTaxa()">
                <option value="">Selecione o Bairro...</option>
                </select>
        </div>

        <div class="form-group">
            <label class="form-label">Endere√ßo Completo (Rua, N¬∫, Ref):</label>
            <input type="text" id="cli-endereco" class="form-input" placeholder="Ex: Rua A, 10 - Casa amarela">
        </div>

        <div class="form-group">
            <label class="form-label">Forma de Pagamento:</label>
            <select id="cli-pagamento" class="form-select">
                <option value="Pix">Pix</option>
                <option value="Dinheiro">Dinheiro (Levar troco?)</option>
                <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Observa√ß√µes:</label>
            <textarea id="cli-obs" class="form-textarea" rows="2" placeholder="Ex: Tocar a campainha, tirar cebola..."></textarea>
        </div>

        <div style="background: #252525; padding: 10px; border-radius: 8px; margin-top: 10px;">
            <div style="display: flex; justify-content: space-between; color: #aaa;">
                <span>Subtotal:</span>
                <span id="checkout-subtotal">R$ 0,00</span>
            </div>
            <div style="display: flex; justify-content: space-between; color: #aaa;">
                <span>Taxa de Entrega:</span>
                <span id="checkout-taxa">R$ 0,00</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2em; margin-top: 5px; color: var(--primary);">
                <span>Total Final:</span>
                <span id="checkout-total">R$ 0,00</span>
            </div>
        </div>

        <button class="btn-confirm" onclick="enviarPedidoZap()">Enviar Pedido no WhatsApp</button>
        <button class="btn-back" onclick="fecharCheckout()">Voltar</button>
    </div>
</div>

<script>
    // --- DADOS DO NEG√ìCIO ---
    const SEU_WHATSAPP = "5521999999999"; // <--- SEU N√öMERO AQUI

    const BAIRROS = [
        { id: 1, nome: "Parque Alegria", taxa: 3.00 },
        { id: 2, nome: "Chatuba", taxa: 4.00 },
        { id: 3, nome: "Quinta do Caju", taxa: 5.00 },
        { id: 4, nome: "S√£o Sebasti√£o", taxa: 5.00 }
    ];

    // --- LISTAS DE OP√á√ïES E ADICIONAIS ---
    const MOLHOS_LISTA = [
        {nome:"Ketchup",preco:0}, {nome:"Mostarda",preco:0}, {nome:"Mostarda e Mel",preco:0}, 
        {nome:"Maionese",preco:0}, {nome:"Maionese da Casa",preco:0}, {nome:"Maionese Temperada",preco:0}, 
        {nome:"Billy Jack",preco:0}, {nome:"Molho Especial da Casa",preco:0}, 
        {nome:"Molho Ros√© da Casa",preco:0}, {nome:"Barbecue",preco:0}
    ];

    const ADICIONAIS_HAMBURGUER = [{nome:"Ovo",preco:2}, {nome:"Presunto",preco:2}, {nome:"Queijo",preco:2}, {nome:"Calabresa",preco:2}, {nome:"Bacon",preco:3}, {nome:"Carne",preco:3}];
    const ADICIONAIS_HOTDOG = [{nome:"Ovo de Codorna",preco:2}];
    
    // Frutas (Sucos e Vitaminas)
    const SABORES_SUCOS = [{nome:"Laranja",preco:0}, {nome:"Maracuj√°",preco:0}, {nome:"Abacaxi",preco:0}, {nome:"Goiaba",preco:0}];
    const SABORES_VITAMINA_ESPECIAL = [{nome:"Graviola",preco:0}, {nome:"Maracuj√°",preco:0}, {nome:"Cupua√ßu",preco:0}];
    
    const ACAI_OPCOES = [{nome:"Granola",preco:0}, {nome:"Leite em p√≥",preco:0}, {nome:"Pa√ßoca",preco:0}, {nome:"Amendoim",preco:0}, {nome:"Sucrilhos",preco:0}, {nome:"Chocobol",preco:0}, {nome:"Jujuba",preco:0}, {nome:"Leite Condensado",preco:0}];

    const REFRI_LATA = [{nome:"Coca-Cola",preco:0}, {nome:"Fanta Laranja",preco:0}, {nome:"Fanta Uva",preco:0}, {nome:"Sprite",preco:0}, {nome:"Guaran√° Antarctica",preco:0}, {nome:"Soda",preco:0}];
    const REFRI_600 = [{nome:"Coca-Cola",preco:0}, {nome:"Fanta Laranja",preco:0}, {nome:"Fanta Uva",preco:0}, {nome:"Guaran√° Antarctica",preco:0}];
    const REFRI_15 = [{nome:"Coca-Cola",preco:0}, {nome:"Fanta Laranja",preco:0}, {nome:"Guaran√° Antarctica",preco:0}];
    const REFRI_2L = [{nome:"Coca-Cola",preco:0}, {nome:"Fanta Laranja",preco:0}, {nome:"Guaran√° Antarctica",preco:0}];

    // CARD√ÅPIO
    const cardapio = [
        { categoria: "Hamb√∫rgueres Artesanais", itens: [
            { nome: "X-Tudo", desc: "Carne, calabresa, bacon, ovo, presunto, queijo, alface, molhos", preco: 17.00, img: "Xtudo.png" },
            { nome: "X-Picanha", desc: "Carne de picanha, calabresa, bacon, ovo, presunto, queijo, alface", preco: 16.00, img: "xpicanha.png" },
            { nome: "X-Bacon de Picanha", desc: "Carne de picanha, bacon, queijo, alface", preco: 18.00, img: "xbaconp.png" },
            { nome: "X-Tudo de Frango", desc: "Frango, calabresa, bacon, ovo, presunto, queijo, alface", preco: 15.00, img: "xtudofrango.png" },
            { nome: "X-Bacon de Frango", desc: "Frango, bacon, queijo, alface", preco: 14.00, img: "xbaconf.png" },
            { nome: "X-Bacon", desc: "Carne, bacon, queijo, alface", preco: 14.00, img: "xbacon.png" },
            { nome: "X-Duplo", desc: "2 Carnes, 2 ovos, 2 presuntos, 2 queijos, alface", preco: 22.00, img: "xduplo.png" },
            { nome: "Duplo Cheddar", desc: "2 Carnes, alface, 4 fatias de cheddar, bacon", preco: 20.00, img: "duplocheddar.png" },
        ]},
        { categoria: "Cl√°ssicos & Simples", itens: [
             { nome: "X-Calabresa", desc: "Carne, calabresa, presunto, queijo", preco: 12.00, img: "xcalabresa.png" },
             { nome: "X-Burguer", desc: "Carne, ovo, 2 queijos, calabresa, alface", preco: 11.00, img: "xburguer.png" },
             { nome: "X-Egg", desc: "Carne, presunto, queijo, ovo, alface", preco: 10.00, img: "xegg.png" },
             { nome: "Hamb. de Queijo", desc: "Carne, queijo, alface, batata palha", preco: 10.00, img: "hq.png" },
             { nome: "Hamb. Queijo c/ Presunto", desc: "Carne, queijo, presunto, alface", preco: 11.00, img: "hqp.png" },
             { nome: "Hamb√∫rguer de Ovo", desc: "Carne, ovo, alface, batata palha", preco: 9.00, img: "hovo.png" },
             { nome: "Misto Quente", desc: "P√£o de forma, queijo e presunto", preco: 8.00, img: "misto.jpeg" },
             { nome: "Mist√£o", desc: "3 p√£es, 2 queijos e 2 presuntos", preco: 10.00, img: "misto.jpeg" },
             { nome: "Queij√£o", desc: "3 p√£es e 4 queijos", preco: 5.00, img: "queij√£o.jpeg" }
        ]},
        { categoria: "Hot Dog", itens: [
            { nome: "Hot-Dog Salsicha", desc: "Completo com Salsicha", preco: 12.00, img: "salsicha.jpeg" },
            { nome: "Hot-Dog Lingui√ßa", desc: "Completo com Lingui√ßa", preco: 13.00, img: "lingui√ßa.jpeg" }
        ]},
        { categoria: "Por√ß√µes", itens: [
            { nome: "Batata Frita P", desc: "Pequena", preco: 6.00, img: "batatafrita.jpg" },
            { nome: "Batata Frita M", desc: "M√©dia", preco: 10.00, img: "batatafrita.jpg" },
            { nome: "Batata Frita G", desc: "Grande", preco: 15.00, img: "batatafrita.jpg" },
            { nome: "Anel de Cebola (6un)", desc: "Pequena", preco: 5.00, img: "cebolas.jpeg" },
            { nome: "Anel de Cebola (12un)", desc: "Grande", preco: 10.00, img: "cebolas.jpeg" },
            { nome: "Batata Maluca", desc: "Completa c/ bacon, calabresa, carne, cheddar", preco: 35.00, img: "batatamaluca.jpg" }
        ]},
        { categoria: "A√ßa√≠", itens: [
            { nome: "A√ßa√≠ 750ml", desc: "Copo Gigante", preco: 20.00, img: "A√ßai.jpg" },
            { nome: "A√ßa√≠ 500ml", desc: "Copo Grande", preco: 16.00, img: "A√ßai.jpg" },
            { nome: "A√ßa√≠ 400ml", desc: "Copo M√©dio", preco: 14.00, img: "A√ßai.jpg" },
            { nome: "A√ßa√≠ 300ml", desc: "Copo Padr√£o", preco: 10.00, img: "A√ßai.jpg" },
            { nome: "A√ßa√≠ 200ml", desc: "Copo Pequeno", preco: 8.00, img: "A√ßai.jpg" },
            { nome: "A√ßa√≠ 150ml", desc: "Copo Mini", preco: 6.00, img: "A√ßai.jpg" }
        ]},
        { categoria: "Sucos Naturais", itens: [
            { nome: "Suco Natural 750ml", desc: "Escolha o sabor", preco: 17.00, img: "Sucos.png" },
            { nome: "Suco Natural 500ml", desc: "Escolha o sabor", preco: 13.00, img: "Sucos.png" },
            { nome: "Suco Natural 400ml", desc: "Escolha o sabor", preco: 11.00, img: "Sucos.png" }
        ]},
        { categoria: "Vitaminas", itens: [
            { nome: "Vitamina de Morango 750ml", desc: "Sabor Morango", preco: 17.00, img: "Vitaminamorango.jpg" },
            { nome: "Vitamina de Morango 500ml", desc: "Sabor Morango", preco: 14.00, img: "Vitaminamorango.jpg" },
            { nome: "Vitamina de Morango 400ml", desc: "Sabor Morango", preco: 12.00, img: "Vitaminamorango.jpg" },
            
            { nome: "Vitamina Especial 750ml", desc: "Graviola, Maracuj√° ou Cupua√ßu", preco: 18.00, img: "Vitaminas.png" },
            { nome: "Vitamina Especial 500ml", desc: "Graviola, Maracuj√° ou Cupua√ßu", preco: 16.00, img: "Vitaminas.png" },
            { nome: "Vitamina Especial 400ml", desc: "Graviola, Maracuj√° ou Cupua√ßu", preco: 14.00, img: "Vitaminas.png" }
        ]},
        { categoria: "Bebidas", itens: [
            { nome: "Guaravita", desc: "Copo", preco: 2.50, img: "Guaravita.jpg" },
            { nome: "Guaraviton", desc: "Garrafa", preco: 5.00, img: "guaraviton.jpeg" },
            { nome: "Refri Lata 350ml", desc: "Selecione o sabor", preco: 6.00, img: "Refri de lata.png" },
            { nome: "Refri 600ml", desc: "Selecione o sabor", preco: 8.00, img: "Refri de 600mL.jpg" },
            { nome: "Refri 1,5 Litros", desc: "Selecione o sabor", preco: 11.00, img: "Refrigerante-2L.png" },
            { nome: "Refri 2 Litros", desc: "Selecione o sabor", preco: 14.00, img: "Refrigerante-2L.png" }
        ]}
    ];

    let carrinho = [];

    // --- INICIALIZA√á√ÉO ---
    window.onload = function() {
        renderizarCardapio();
        preencherBairros();
    };

    function renderizarCardapio() {
        const container = document.getElementById('menu-container');
        cardapio.forEach((categoria, catIndex) => {
            const divCat = document.createElement('div');
            
            divCat.innerHTML = `
                <div class="category-header" onclick="toggleCategory('cat-${catIndex}')">
                    <h2 class="category-title">${categoria.categoria}</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div id="cat-${catIndex}" class="items-container">
                    </div>
            `;
            
            let itemsHTML = "";
            categoria.itens.forEach((item, itemIndex) => {
                let opcoesHTML = "";
                
                // L√ìGICA DE EXIBI√á√ÉO DE OP√á√ïES
                if (categoria.categoria.includes("Hamb√∫rgueres") || categoria.categoria.includes("Cl√°ssicos")) {
                    opcoesHTML += gerarOpcoesHTML(MOLHOS_LISTA, "Molhos e Maioneses (Marque os desejados):");
                    opcoesHTML += gerarOpcoesHTML(ADICIONAIS_HAMBURGUER, "Adicionais Pagos:");
                } 
                else if (categoria.categoria.includes("Hot Dog")) {
                    opcoesHTML += gerarOpcoesHTML(MOLHOS_LISTA, "Molhos e Maioneses:");
                    opcoesHTML += gerarOpcoesHTML(ADICIONAIS_HOTDOG, "Adicionais:");
                }
                else if (categoria.categoria.includes("A√ßa√≠")) {
                    opcoesHTML = gerarOpcoesHTML(ACAI_OPCOES, "Complementos Gr√°tis:");
                } 
                else if (item.nome.includes("Suco Natural")) {
                    opcoesHTML = gerarOpcoesHTML(SABORES_SUCOS, "Escolha o Sabor:");
                }
                else if (item.nome.includes("Vitamina Especial")) {
                    opcoesHTML = gerarOpcoesHTML(SABORES_VITAMINA_ESPECIAL, "Escolha o Sabor:");
                }
                // Refrigerantes
                else if (item.nome.includes("Refri Lata")) {
                    opcoesHTML = gerarOpcoesHTML(REFRI_LATA, "Escolha o Sabor:");
                }
                else if (item.nome.includes("Refri 600ml")) {
                    opcoesHTML = gerarOpcoesHTML(REFRI_600, "Escolha o Sabor:");
                }
                else if (item.nome.includes("Refri 1,5 Litros")) {
                    opcoesHTML = gerarOpcoesHTML(REFRI_15, "Escolha o Sabor:");
                }
                else if (item.nome.includes("Refri 2 Litros")) {
                    opcoesHTML = gerarOpcoesHTML(REFRI_2L, "Escolha o Sabor:");
                }
                // Vitamina de Morango n√£o precisa de seletor pois j√° √© o sabor.

                itemsHTML += `
                    <div class="menu-item">
                        <img src="${item.img}" alt="${item.nome}" class="menu-image">
                        <div class="item-content">
                            <div class="item-info">
                                <h3>${item.nome}</h3>
                                <p>${item.desc}</p>
                            </div>
                            ${opcoesHTML}
                            <div class="price-actions">
                                <span class="price">R$ ${item.preco.toFixed(2).replace('.', ',')}</span>
                                <button class="add-btn" onclick="adicionarAoCarrinho(this, '${item.nome}', ${item.preco})">Adicionar</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.appendChild(divCat);
            document.getElementById(`cat-${catIndex}`).innerHTML = itemsHTML;
        });
    }
    
    function toggleCategory(id) {
        const content = document.getElementById(id);
        const header = content.previousElementSibling;
        
        content.classList.toggle('open');
        header.classList.toggle('active');
    }

    function gerarOpcoesHTML(lista, titulo) {
        let html = `<div class="options-container"><span class="options-title">${titulo}</span><div class="checkbox-group">`;
        lista.forEach(op => {
            let textoPreco = op.preco > 0 ? ` (+ R$ ${op.preco.toFixed(2)})` : "";
            html += `<label class="checkbox-label"><input type="checkbox" value="${op.nome}" data-preco="${op.preco}"> ${op.nome}${textoPreco}</label>`;
        });
        html += `</div></div>`;
        return html;
    }

    // --- CARRINHO ---
    function adicionarAoCarrinho(btn, nome, precoBase) {
        const itemDiv = btn.closest('.menu-item');
        const checks = itemDiv.querySelectorAll('input:checked');
        let opcoes = [];
        let precoExtra = 0;

        checks.forEach(c => {
            opcoes.push(c.value);
            precoExtra += parseFloat(c.getAttribute('data-preco'));
            c.checked = false;
        });

        carrinho.push({
            id: Date.now(),
            nome: nome,
            precoBase: precoBase,
            precoFinal: precoBase + precoExtra,
            opcoes: opcoes
        });

        atualizarBarra();
        
        const txt = btn.innerText;
        btn.innerText = "Adicionado!";
        btn.style.background = "#4CAF50";
        setTimeout(() => { btn.innerText = "Adicionar"; btn.style.background = ""; }, 1000);
    }

    function atualizarBarra() {
        const total = carrinho.reduce((acc, item) => acc + item.precoFinal, 0);
        document.getElementById('cart-count').innerText = `${carrinho.length} itens`;
        document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
        document.getElementById('cart-bar').style.display = carrinho.length > 0 ? 'flex' : 'none';
    }

    // --- MODAL CARRINHO ---
    function abrirModalCarrinho() {
        const lista = document.getElementById('cart-list');
        lista.innerHTML = '';
        let total = 0;

        carrinho.forEach((item, idx) => {
            total += item.precoFinal;
            let descOpcoes = item.opcoes.length > 0 ? `<br><small>+ ${item.opcoes.join(', ')}</small>` : '';
            
            lista.innerHTML += `
                <li class="cart-item">
                    <div class="cart-item-info">
                        <span class="cart-item-name">${item.nome}</span>
                        <span class="cart-item-details">${descOpcoes}</span>
                        <span class="cart-item-price">R$ ${item.precoFinal.toFixed(2).replace('.', ',')}</span>
                    </div>
                    <button class="btn-remove" onclick="removerItem(${idx})">‚ùå</button>
                </li>
            `;
        });

        document.getElementById('modal-total-price').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
        document.getElementById('cart-modal').style.display = 'flex';
    }

    function removerItem(idx) {
        carrinho.splice(idx, 1);
        atualizarBarra();
        if (carrinho.length === 0) fecharModalCarrinho();
        else abrirModalCarrinho();
    }

    function fecharModalCarrinho() {
        document.getElementById('cart-modal').style.display = 'none';
    }

    // --- CHECKOUT ---
    function preencherBairros() {
        const select = document.getElementById('cli-bairro');
        BAIRROS.forEach(b => {
            select.innerHTML += `<option value="${b.id}">${b.nome} (+ R$ ${b.taxa.toFixed(2)})</option>`;
        });
    }

    function irParaCheckout() {
        fecharModalCarrinho();
        document.getElementById('checkout-modal').style.display = 'flex';
        atualizarTotalComTaxa();
    }

    function fecharCheckout() {
        document.getElementById('checkout-modal').style.display = 'none';
        abrirModalCarrinho(); 
    }

    function atualizarTotalComTaxa() {
        const subtotal = carrinho.reduce((acc, item) => acc + item.precoFinal, 0);
        const bairroId = document.getElementById('cli-bairro').value;
        const bairro = BAIRROS.find(b => b.id == bairroId);
        const taxa = bairro ? bairro.taxa : 0;

        document.getElementById('checkout-subtotal').innerText = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
        document.getElementById('checkout-taxa').innerText = `R$ ${taxa.toFixed(2).replace('.', ',')}`;
        document.getElementById('checkout-total').innerText = `R$ ${(subtotal + taxa).toFixed(2).replace('.', ',')}`;
    }

    function enviarPedidoZap() {
        const nome = document.getElementById('cli-nome').value;
        const bairroId = document.getElementById('cli-bairro').value;
        const endereco = document.getElementById('cli-endereco').value;
        const pgto = document.getElementById('cli-pagamento').value;
        const obs = document.getElementById('cli-obs').value;

        if (!nome || !bairroId || !endereco) {
            alert("Por favor, preencha nome, bairro e endere√ßo.");
            return;
        }

        const bairro = BAIRROS.find(b => b.id == bairroId);
        const subtotal = carrinho.reduce((acc, item) => acc + item.precoFinal, 0);
        const total = subtotal + bairro.taxa;

        let msg = `*NOVO PEDIDO - G BURG'S*\n------------------------------\n`;
        
        carrinho.forEach(item => {
            msg += `‚ñ™Ô∏è *${item.nome}* (R$ ${item.precoFinal.toFixed(2)})\n`;
            if (item.opcoes.length > 0) {
                item.opcoes.forEach(op => {
                    msg += `   + ${op}\n`;
                });
            }
            msg += `\n`; 
        });

        msg += `------------------------------\n`;
        msg += `Subtotal: R$ ${subtotal.toFixed(2).replace('.', ',')}\n`;
        msg += `Entrega (${bairro.nome}): R$ ${bairro.taxa.toFixed(2).replace('.', ',')}\n`;
        msg += `*TOTAL FINAL: R$ ${total.toFixed(2).replace('.', ',')}*\n`;
        msg += `------------------------------\n`;
        msg += `üë§ *Cliente:* ${nome}\n`;
        msg += `üìç *Endere√ßo:* ${endereco}\n`;
        msg += `üó∫Ô∏è *Bairro:* ${bairro.nome}\n`;
        msg += `üí≥ *Pagamento:* ${pgto}\n`;
        if (obs) msg += `üìù *Obs:* ${obs}`;

        const url = `https://wa.me/${SEU_WHATSAPP}?text=${encodeURIComponent(msg)}`;
        window.open(url, '_blank');
    }
</script>

</body>
</html>
